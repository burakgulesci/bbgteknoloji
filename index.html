<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>BBG Metin RPG - Geli≈ümi≈ü Versiyon</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; user-select:none; }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #121212;
    color: #eee;
    overflow: hidden;
  }
  #gameWrapper {
    display: flex;
    flex-direction: column;
    height: 100vh;
  }
  #topBar {
    background: #1e1e1e;
    padding: 6px 12px;
    font-size: 11px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    user-select:none;
  }
  #topBar div {
    display: flex;
    align-items: center;
  }
  #topBar .icon {
    font-size: 16px;
    margin-right: 4px;
    color: #00ffaa;
  }
  #expBarContainer {
    background: #333;
    width: 100%;
    height: 6px;
  }
  #expBar {
    height: 6px;
    background: #00ffaa;
    width: 0%;
    transition: width 0.3s ease;
  }
  #taskBar {
    background: #2b2b2b;
    padding: 6px 12px;
    font-size: 12px;
    text-align: center;
    border-bottom: 1px solid #444;
    color: #ffeb3b;
    min-height: 28px;
  }
  #screenContent {
    flex-grow: 1;
    overflow-y: auto;
    padding: 10px 12px;
    background: #191919;
    font-size: 12px;
    position: relative;
  }
  #bottomBar {
    display: flex;
    justify-content: space-around;
    background: #111;
    border-top: 1px solid #444;
    user-select:none;
  }
  .bottomBtn {
    flex: 1;
    padding: 8px 0;
    font-size: 11px;
    text-align: center;
    border-right: 1px solid #222;
    cursor: pointer;
    user-select:none;
  }
  .bottomBtn:last-child {
    border-right: none;
  }
  .bottomBtn span {
    display: block;
    font-size: 18px;
    margin-bottom: 2px;
  }
  button {
    background: #00ffaa;
    border: none;
    padding: 6px 12px;
    border-radius: 5px;
    font-size: 12px;
    margin: 5px 0;
    cursor: pointer;
    user-select:none;
  }
  button:disabled {
    background: gray;
    cursor: not-allowed;
  }
  ul { padding-left: 16px; margin-top: 5px; }
  h2 { font-size: 14px; margin: 8px 0; }
  .item-row {
    display: flex;
    justify-content: space-between;
    padding: 6px 0;
    border-bottom: 1px solid #333;
    align-items: center;
  }
  .mine-icon {
    position: absolute;
    font-size: 20px;
    color: #00ffaa;
    pointer-events: none;
    user-select: none;
    animation: minePop 0.8s ease forwards;
    font-weight: bold;
  }
  @keyframes minePop {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    100% { opacity: 0; transform: translateY(-40px) scale(1.4); }
  }
  .item-slot {
    background: rgba(255,255,255,0.1);
    border-radius: 5px;
    padding: 6px 8px;
    margin: 3px 4px;
    display: inline-flex;
    align-items: center;
    font-size: 12px;
    cursor: default;
    user-select:none;
  }
  .item-slot img {
    width: 20px;
    height: 20px;
    margin-right: 6px;
  }
  .craft-item {
    margin-bottom: 6px;
  }
  .craft-item span {
    margin-left: 4px;
    font-weight: bold;
  }
  .task-item {
    margin: 6px 0;
    padding: 6px;
    background: #222;
    border-radius: 5px;
  }
  .task-item.completed {
    background: #004400;
    color: #aaffaa;
    text-decoration: line-through;
  }
  .task-reward {
    color: #0f0;
    font-weight: bold;
  }
  input[type=number] {
    width: 50px;
    padding: 2px 4px;
    margin-left: 6px;
  }
  .sell-button {
    background: #ff5555;
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 11px;
    user-select:none;
  }
  .sell-button:disabled {
    background: gray;
    cursor: not-allowed;
  }
  /* Scrollbar */
  #screenContent::-webkit-scrollbar {
    width: 6px;
  }
  #screenContent::-webkit-scrollbar-track {
    background: #222;
  }
  #screenContent::-webkit-scrollbar-thumb {
    background: #00ffaa;
    border-radius: 3px;
  }
</style>
</head>
<body>
<div id="gameWrapper">
  <div id="topBar">
    <div><span class="icon">üí∞</span> <span id="tlValue">0.00 TL</span></div>
    <div><span class="icon">‚õè</span> <span id="pickaxeType">Ta≈ü Kazma</span></div>
    <div><span class="icon">üîã</span> <span id="energy">100</span></div>
    <div><span class="icon">‚ù§</span> <span id="durability">100</span></div>
    <div><span class="icon">üéÆ</span> <span id="level">1</span></div>
  </div>
  <div id="expBarContainer"><div id="expBar"></div></div>
  <div id="taskBar">G√∂revler y√ºklendi...</div>
  <div id="screenContent" tabindex="0">Maden ekranƒ±nda kazmak i√ßin herhangi bir yere tƒ±klayƒ±n...</div>
  <div id="bottomBar">
    <div class="bottomBtn" id="btnMine"><span>‚õè</span>Maden</div>
    <div class="bottomBtn" id="btnShop"><span>üè¨</span>Maƒüaza</div>
    <div class="bottomBtn" id="btnCraft"><span>üõ†</span>Craft</div>
    <div class="bottomBtn" id="btnInventory"><span>üéí</span>Envanter</div>
    <div class="bottomBtn" id="btnTasks"><span>üéØ</span>G√∂revler</div>
    <div class="bottomBtn" id="btnBank"><span>üè¶</span>Banka</div>
  </div>
</div>

<!-- Ses -->
<audio id="mineSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_8a0bdfdbe7.mp3?filename=stone-pickaxe-104196.mp3" preload="auto"></audio>

<script>
(() => {
  // --- VERƒ∞ YAPILARI ---

  // T√ºm itemler (ikonlar fontawesome veya emojilerle temsil)
  const allItems = {
    "Ta≈ü": { value: 15, desc: "Deƒüerli ta≈ü", icon: "ü™®" },
    "Demir": { value: 40, desc: "Demir cevheri", icon: "‚õì" },
    "Altƒ±n": { value: 80, desc: "Deƒüerli altƒ±n", icon: "üü°" },
    "Elmas": { value: 120, desc: "Nadir elmas", icon: "üíé" },
    "Ta≈ü Kazma": { value: 0, type: "tool", durability: 80, desc: "Ba≈ülangƒ±√ß ta≈ü kazmasƒ±", icon: "‚õè" },
    "Demir Kazma": { value: 5000, type: "tool", durability: 120, desc: "Daha g√º√ßl√º demir kazma", icon: "‚õè" },
    "Altƒ±n Kazma": { value: 15000, type: "tool", durability: 200, desc: "Altƒ±n kazma", icon: "‚õè" },
    "Elmas Kazma": { value: 50000, type: "tool", durability: 350, desc: "Elmas kazma", icon: "‚õè" },
    "Energy Drink": { value: 1000, type: "consumable", energy: 50, desc: "Enerji i√ßeceƒüi +50 enerji verir.", icon: "‚ö°" }
  };

  // Kazma craft tarifleri
  const craftRecipes = {
    "Ta≈ü Kazma": { "Ta≈ü": 15 },
    "Demir Kazma": { "Demir": 25 },
    "Altƒ±n Kazma": { "Altƒ±n": 60 },
    "Elmas Kazma": { "Elmas": 100 }
  };

  // Oyun durumu
  let state = {
    coin: 0,
    energy: 100,
    durability: 100,
    level: 1,
    exp: 0,
    bag: [],
    equippedPickaxe: "Ta≈ü Kazma",
  };

  // G√∂revler: 5 normal + 1 g√ºnl√ºk
  let tasks = [
    { id: 1, text: "5 ta≈ü kaz", item: "Ta≈ü", count: 5, done: 0, coinReward: 25, expReward: 10, completed: false },
    { id: 2, text: "3 demir kaz", item: "Demir", count: 3, done: 0, coinReward: 40, expReward: 15, completed: false },
    { id: 3, text: "2 altƒ±n bul", item: "Altƒ±n", count: 2, done: 0, coinReward: 60, expReward: 20, completed: false },
    { id: 4, text: "1 elmas √ßƒ±kar", item: "Elmas", count: 1, done: 0, coinReward: 100, expReward: 40, completed: false },
    { id: 5, text: "10 ta≈ü sat", item: "Ta≈ü", count: 10, done: 0, coinReward: 30, expReward: 15, completed: false },
  ];
  let dailyTask = { id: 6, text: "G√ºnl√ºk g√∂rev: 15 ta≈ü kaz!", item: "Ta≈ü", count: 15, done: 0, coinReward: 100, expReward: 60, completed: false };

  // --- KAYDET & Y√úKLE ---

  function saveGame() {
    const saveData = {
      state,
      tasks,
      dailyTask
    };
    localStorage.setItem("bbg-metin-rpg-save", JSON.stringify(saveData));
  }

  function loadGame() {
    const saveData = JSON.parse(localStorage.getItem("bbg-metin-rpg-save"));
    if (saveData) {
      state = saveData.state;
      tasks = saveData.tasks;
      dailyTask = saveData.dailyTask;
    }
  }

  // --- YARDIMCI FONKSƒ∞YONLAR ---

  function updateUI() {
    document.getElementById("energy").textContent = state.energy;
    document.getElementById("durability").textContent = state.durability;
    document.getElementById("level").textContent = state.level;
    document.getElementById("pickaxeType").textContent = state.equippedPickaxe;
    document.getElementById("tlValue").textContent = (state.coin / 1000).toFixed(2) + " TL";

    // Exp bar width hesapla
    let neededExp = Math.floor(state.level * 120 * Math.pow(1.1, state.level-1));
    let expPercent = Math.min(100, (state.exp / neededExp) * 100);
    document.getElementById("expBar").style.width = expPercent + "%";

    updateTaskBar();
  }

  function showNotice(text) {
    const el = document.createElement("div");
    el.textContent = text;
    el.style.position = "fixed";
    el.style.top = "30%";
    el.style.left = "50%";
    el.style.transform = "translateX(-50%)";
    el.style.background = "#00ffaa";
    el.style.color = "#000";
    el.style.padding = "10px 20px";
    el.style.borderRadius = "8px";
    el.style.zIndex = 10000;
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 2000);
  }

  // Seviye atlama kontrol√º
  function checkLevelUp() {
    let neededExp = Math.floor(state.level * 120 * Math.pow(1.1, state.level-1));
    while (state.exp >= neededExp) {
      state.exp -= neededExp;
      state.level++;
      state.energy = 100;
      state.durability = allItems[state.equippedPickaxe].durability || 100;
      showNotice(üéâ Seviye atladƒ±n! Yeni seviye: ${state.level});
      neededExp = Math.floor(state.level * 120 * Math.pow(1.1, state.level-1));
    }
  }

  // G√∂rev barƒ±nƒ± g√ºncelle
  function updateTaskBar() {
    let incompleteTasks = tasks.filter(t => !t.completed);
    let currentTask = incompleteTasks.length > 0 ? incompleteTasks[0] : dailyTask.completed ? null : dailyTask;
    if (!currentTask) {
      document.getElementById("taskBar").textContent = "T√ºm g√∂revler tamamlandƒ±! Yeni g√∂revler yakƒ±nda.";
      return;
    }
    let progress = currentTask.done + "/" + currentTask.count;
    let rewardCoin = currentTask.coinReward;
    document.getElementById("taskBar").textContent = üéØ G√∂rev: ${currentTask.text} (${progress}) - √ñd√ºl: ${rewardCoin} Coin;
  }

  // G√∂rev ilerlemesini kontrol et
  function updateTaskProgress(item) {
    // Normal g√∂revler
    for(let t of tasks){
      if(!t.completed && t.item === item){
        t.done++;
        if(t.done >= t.count){
          t.completed = true;
          state.coin += t.coinReward;
          state.exp += t.expReward;
          showNotice(‚úÖ G√∂rev tamamlandƒ±: ${t.text});
        }
      }
    }
    // G√ºnl√ºk g√∂rev
    if(!dailyTask.completed && dailyTask.item === item){
      dailyTask.done++;
      if(dailyTask.done >= dailyTask.count){
        dailyTask.completed = true;
        state.coin += dailyTask.coinReward;
        state.exp += dailyTask.expReward;
        showNotice(‚úÖ G√ºnl√ºk g√∂rev tamamlandƒ±: ${dailyTask.text});
      }
    }
  }

  // --- OYUN MEKANƒ∞KLERƒ∞ ---

  // Rastgele integer
  function randomInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

  // Kazma i≈ülemi (sadece Maden ekranƒ±nda ge√ßerli)
  let clickCount = 0;
  let rewardClickCount = randomInt(8,12);

  function mineClick(e){
    if(currentScreen !== "mine") return;

    if(state.energy <= 0) {
      showNotice("‚ö° Enerjin bitti! Bankadan enerji i√ßeceƒüi alabilirsin.");
      return;
    }
    if(state.durability <= 0) {
      showNotice("üõ† Kazman kƒ±rƒ±ldƒ±! Maƒüazadan yenisini al.");
      return;
    }

    // Coin kazanƒ±mƒ± (kazma tipi bazlƒ±)
    let baseCoinGain = 10 * state.level;
    // Kazma g√ºc√º artƒ±≈üƒ± (kazma seviyesine g√∂re)
    const pickaxePower = {
      "Ta≈ü Kazma": 1,
      "Demir Kazma": 1.6,
      "Altƒ±n Kazma": 2.8,
      "Elmas Kazma": 4.5
    };
    let coinGain = Math.floor(baseCoinGain * (pickaxePower[state.equippedPickaxe] || 1));
    state.coin += coinGain;

    // Item d√º≈üme ≈üansƒ±
    clickCount++;
    if(clickCount >= rewardClickCount) {
      clickCount = 0;
      rewardClickCount = randomInt(8,12);

      // Item d√º≈ü√ºr
      let itemPool = ["Ta≈ü","Demir","Altƒ±n","Elmas"];
      // Level arttƒ±k√ßa nadir elmas d√º≈üme ≈üansƒ± biraz artsƒ±n:
      let chances = {
        "Ta≈ü": 0.45,
        "Demir": 0.30,
        "Altƒ±n": 0.18,
        "Elmas": 0.07 + 0.01*state.level
      };

      let rand = Math.random();
      let acc=0;
      let dropped=null;
      for(let it of itemPool){
        acc += chances[it];
        if(rand <= acc){
          dropped = it;
          break;
        }
      }
      if(dropped){
        addItem(dropped,1);
        updateTaskProgress(dropped);
        animateDrop(dropped);
        showNotice(+1 ${dropped} kazandƒ±n!);
      }
    }

    // Kazma dayanƒ±klƒ±lƒ±ƒüƒ± ve enerji azalmasƒ± (level zorluk arttƒ±k√ßa daha hƒ±zlƒ± azalabilir)
    let durabilityLoss = 1 + state.level*0.05;
    let energyLoss = 1 + state.level*0.03;
    state.durability = Math.max(0, state.durability - durabilityLoss);
    state.energy = Math.max(0, state.energy - energyLoss);

    // Exp kazanƒ±mƒ±
    let expGain = 5 + Math.floor(state.level/2);
    state.exp += expGain;
    checkLevelUp();
    updateUI();
    saveGame();

    // Kazma sesi √ßal
    document.getElementById("mineSound").currentTime = 0;
    document.getElementById("mineSound").play();
  }

  // Animasyonlu item drop g√∂sterimi
  function animateDrop(itemName) {
    let icon = allItems[itemName].icon || "‚ùì";
    let el = document.createElement("div");
    el.textContent = icon;
    el.classList.add("mine-icon");
    el.style.left = (window.innerWidth/2 + (Math.random()*100-50)) + "px";
    el.style.top = (window.innerHeight/2 + (Math.random()*40-20)) + "px";
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 800);
  }

  // Envantere item ekle
  function addItem(name, qty) {
    let slot = state.bag.find(i => i.name === name);
    if(slot) {
      slot.qty += qty;
    } else {
      state.bag.push({name, qty});
    }
  }

  // --- EKRANLAR ---

  let currentScreen = "mine";
  const screenContent = document.getElementById("screenContent");

  function showMineScreen() {
    currentScreen = "mine";
    screenContent.innerHTML = "Maden ekranƒ±nda kazmak i√ßin herhangi bir yere tƒ±klayƒ±n.<br><br>" +
      "<b>Enerji ve Kazma Dayanƒ±klƒ±lƒ±ƒüƒ±nƒ± iyi takip et!</b>";
  }

  function showShopScreen() {
    currentScreen = "shop";
    let html = <h2>Maƒüaza</h2><p>Kazma √ße≈üitleri satƒ±n alƒ±nabilir.</p>;
    for(let key of Object.keys(craftRecipes)){
      let price = allItems[key].value;
      let isAffordable = state.coin >= price;
      html += `<div class="item-row">
        <div>${allItems[key].icon} ${key}</div>
        <div><b>${price} Coin</b></div>
        <div><button ${isAffordable ? "" : "disabled"} onclick="buyPickaxe('${key}')">Satƒ±n Al</button></div>
      </div>`;
    }
    screenContent.innerHTML = html;
  }

  function buyPickaxe(pickaxeName){
    let price = allItems[pickaxeName].value;
    if(state.coin >= price){
      state.coin -= price;
      // Kazmayƒ± deƒüi≈ütir, dayanƒ±klƒ±lƒ±ƒüƒ± tam dolu yap
      state.equippedPickaxe = pickaxeName;
      state.durability = allItems[pickaxeName].durability;
      showNotice(${pickaxeName} satƒ±n alƒ±ndƒ± ve ku≈üandƒ±n!);
      saveGame();
      updateUI();
      showShopScreen();
    }
  }

  function showCraftScreen() {
    currentScreen = "craft";
    let html = <h2>Craft Ekranƒ±</h2><p>Malzemelerin:</p><div>;
    for(let item in craftRecipes){
      html += `<div class="craft-item">${allItems[item].icon} <b>${item}</b> ‚Äî Gereken: `;
      let needed = craftRecipes[item];
      let parts = [];
      for(let mat in needed){
        let owned = (state.bag.find(b => b.name === mat)?.qty) || 0;
        let enough = owned >= needed[mat];
        parts.push(<span style="color:${enough ? "#0f0" : "#f00"}">${mat} (${owned}/${needed[mat]})</span>);
      }
      html += parts.join(", ") + ` <button onclick="craftItem('${item}')" ${canCraft(item) ? "" : "disabled"}>Craft</button></div>`;
    }
    html += </div>;
    screenContent.innerHTML = html;
  }

  function canCraft(item){
    if(!craftRecipes[item]) return false;
    let needed = craftRecipes[item];
    for(let mat in needed){
      let owned = (state.bag.find(b => b.name === mat)?.qty) || 0;
      if(owned < needed[mat]) return false;
    }
    return true;
  }

  function craftItem(item) {
    if(!canCraft(item)) return;
    let needed = craftRecipes[item];
    for(let mat in needed){
      let slot = state.bag.find(b => b.name === mat);
      slot.qty -= needed[mat];
      if(slot.qty <= 0) {
        state.bag = state.bag.filter(b => b.qty > 0);
      }
    }
    addItem(item, 1);
    showNotice(${item} √ºretildi!);
    saveGame();
    updateUI();
    showCraftScreen();
  }

  function showInventoryScreen() {
    currentScreen = "inventory";
    if(state.bag.length === 0) {
      screenContent.innerHTML = "<p>Envanter bo≈ü.</p>";
      return;
    }
    let html = "<h2>Envanter</h2>";
    for(let slot of state.bag){
      html += `<div class="item-row">
        <div>${allItems[slot.name]?.icon || "‚ùì"} ${slot.name}</div>
        <div>Adet: ${slot.qty}</div>
        <div><button class="sell-button" onclick="sellItem('${slot.name}', 1)">Sat</button></div>
      </div>`;
    }
    screenContent.innerHTML = html;
  }

  function sellItem(itemName, qty){
    let slot = state.bag.find(b => b.name === itemName);
    if(!slot || slot.qty < qty) return;
    let price = (allItems[itemName]?.value || 1) * qty;
    slot.qty -= qty;
    if(slot.qty <= 0) state.bag = state.bag.filter(b => b.qty > 0);
    state.coin += price;
    showNotice(${qty} ${itemName} satƒ±ldƒ±, +${price} Coin kazandƒ±n.);
    updateTaskProgress(itemName); // Satmak da g√∂rev olabilir
    saveGame();
    updateUI();
    showInventoryScreen();
  }

  function showTasksScreen() {
    currentScreen = "tasks";
    let html = "<h2>G√∂revler</h2>";
    for(let t of tasks){
      html += `<div class="task-item ${t.completed ? "completed" : ""}">
        <div>${t.text}</div>
        <div>Durum: ${t.done}/${t.count}</div>
        <div class="task-reward">√ñd√ºl: ${t.coinReward} Coin, ${t.expReward} Exp</div>
      </div>`;
    }
    html += <h3>G√ºnl√ºk G√∂rev</h3>;
    html += `<div class="task-item ${dailyTask.completed ? "completed" : ""}">
      <div>${dailyTask.text}</div>
      <div>Durum: ${dailyTask.done}/${dailyTask.count}</div>
      <div class="task-reward">√ñd√ºl: ${dailyTask.coinReward} Coin, ${dailyTask.expReward} Exp</div>
    </div>`;
    screenContent.innerHTML = html;
  }

  // Banka ekranƒ±: Para √ßek, yatƒ±r, enerji i√ßeceƒüi al
  function showBankScreen(){
    currentScreen = "bank";
    screenContent.innerHTML = `
      <h2>Banka</h2>
      <div><b>Coin:</b> ${state.coin} | <b>TL Kar≈üƒ±lƒ±ƒüƒ±:</b> ${(state.coin/1000).toFixed(2)} TL</div>
      <br>
      <h3>Para √áekme</h3>
      <label>IBAN:</label><br>
      <input type="text" id="ibanInput" placeholder="TRxx xxxx xxxx xxxx xxxx xxxx xx" style="width: 100%;"><br>
      <label>IBAN Sahibi:</label><br>
      <input type="text" id="ibanOwnerInput" placeholder="Ad Soyad" style="width: 100%;"><br>
      <label>Tutar (Coin):</label><br>
      <input type="number" id="withdrawAmount" min="1" max="${state.coin}" value="1" style="width: 100%;"><br>
      <button onclick="withdrawCoin()">Para √áek</button>

      <br><br>
      <h3>Para Yatƒ±rma</h3>
      <label>IBAN:</label><br>
      <input type="text" id="depositIban" value="TR90 0011 1000 0000 0118 8170 01" readonly style="width: 100%;"><br>
      <label>ƒ∞sim Soyisim:</label><br>
      <input type="text" id="depositName" value="Burak G√ºle≈üci" readonly style="width: 100%;"><br>
      <label>Yatƒ±rƒ±m Tutarƒ± (TL):</label><br>
      <input type="number" id="depositAmount" min="1" value="100" style="width: 100%;"><br>
      <button onclick="depositCoin()">Onayla</button>

      <br><br>
      <h3>Enerji ƒ∞√ßeceƒüi</h3>
      <div>50 enerji verir, fiyat: 1000 Coin</div>
      <button onclick="buyEnergyDrink()">Satƒ±n Al</button>
    `;
  }

  // Para √ßekme i≈ülemi
  window.withdrawCoin = function(){
    let iban = document.getElementById("ibanInput").value.trim();
    let owner = document.getElementById("ibanOwnerInput").value.trim();
    let amount = parseInt(document.getElementById("withdrawAmount").value);
    if(!iban || !owner){
      alert("L√ºtfen IBAN ve sahip bilgilerini girin!");
      return;
    }
    if(isNaN(amount) || amount < 1 || amount > state.coin){
      alert("Ge√ßersiz tutar!");
      return;
    }
    state.coin -= amount;
    showNotice(${amount} Coin √ßekildi. ƒ∞≈üleminiz en kƒ±sa s√ºrede i≈ülenecektir.);
    saveGame();
    updateUI();
    showBankScreen();
  }

  // Para yatƒ±rma i≈ülemi
  window.depositCoin = function(){
    let amount = parseInt(document.getElementById("depositAmount").value);
    if(isNaN(amount) || amount < 1){
      alert("Ge√ßersiz yatƒ±rƒ±m tutarƒ±!");
      return;
    }
    // Burada ger√ßek para yatƒ±rma i≈ülemi yok, sadece bilgilendirme
    showNotice(√ñdemeniz alƒ±ndƒ±. En kƒ±sa s√ºrede hesabƒ±nƒ±za yansƒ±tƒ±lacaktƒ±r.);
  }

  // Enerji i√ßeceƒüi satƒ±n alma
window.buyEnergyDrink = function () {
  const price = allItems["Energy Drink"].value;
  if (state.coin < price) {
    alert("Yeterli Coin yok!");
    return;
  }
  state.coin -= price;

  // Enerji fulleniyor
  state.energy = 100;

  showNotice("Enerjin tamamen yenilendi!");
  saveGame();
  updateUI();
  showBankScreen();
};

  }

  // --- BUTON EVENTLERƒ∞ ---

  document.getElementById("btnMine").addEventListener("click", showMineScreen);
  document.getElementById("btnShop").addEventListener("click", showShopScreen);
  document.getElementById("btnCraft").addEventListener("click", showCraftScreen);
  document.getElementById("btnInventory").addEventListener("click", showInventoryScreen);
  document.getElementById("btnTasks").addEventListener("click", showTasksScreen);
  document.getElementById("btnBank").addEventListener("click", showBankScreen);

  // --- SAYFA Kƒ∞Lƒ∞Dƒ∞ KAZMA ƒ∞≈ûLEMƒ∞ ---

  screenContent.addEventListener("click", (e) => {
    if(currentScreen === "mine") {
      mineClick(e);
    }
  });

  // --- BA≈ûLANGI√á ---

  loadGame();
  updateUI();
  showMineScreen();

  // Global fonksiyonlar
  window.buyPickaxe = buyPickaxe;
  window.craftItem = craftItem;
  window.sellItem = sellItem;

})();
</script>
</body>
</html>
