<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
<title>BBG Metin RPG - GeliÅŸmiÅŸ Versiyon</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; user-select:none; }
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #121212;
    color: #eee;
    overflow: hidden;
  }
  #gameWrapper {
    display: flex;
    flex-direction: column;
    height: 100vh;
  }
  #topBar {
    background: #1e1e1e;
    padding: 6px 12px;
    font-size: 11px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    user-select:none;
  }
  #topBar div {
    display: flex;
    align-items: center;
  }
  #topBar .icon {
    font-size: 16px;
    margin-right: 4px;
    color: #00ffaa;
  }
  #expBarContainer {
    background: #333;
    width: 100%;
    height: 6px;
  }
  #expBar {
    height: 6px;
    background: #00ffaa;
    width: 0%;
    transition: width 0.3s ease;
  }
  #taskBar {
    background: #2b2b2b;
    padding: 6px 12px;
    font-size: 12px;
    text-align: center;
    border-bottom: 1px solid #444;
    color: #ffeb3b;
    min-height: 28px;
  }
  #screenContent {
    flex-grow: 1;
    overflow-y: auto;
    padding: 10px 12px;
    background: #191919;
    font-size: 12px;
    position: relative;
  }
  #bottomBar {
    display: flex;
    justify-content: space-around;
    background: #111;
    border-top: 1px solid #444;
    user-select:none;
  }
  .bottomBtn {
    flex: 1;
    padding: 8px 0;
    font-size: 11px;
    text-align: center;
    border-right: 1px solid #222;
    cursor: pointer;
    user-select:none;
  }
  .bottomBtn:last-child {
    border-right: none;
  }
  .bottomBtn span {
    display: block;
    font-size: 18px;
    margin-bottom: 2px;
  }
  button {
    background: #00ffaa;
    border: none;
    padding: 6px 12px;
    border-radius: 5px;
    font-size: 12px;
    margin: 5px 0;
    cursor: pointer;
    user-select:none;
  }
  button:disabled {
    background: gray;
    cursor: not-allowed;
  }
  ul { padding-left: 16px; margin-top: 5px; }
  h2 { font-size: 14px; margin: 8px 0; }
  .item-row {
    display: flex;
    justify-content: space-between;
    padding: 6px 0;
    border-bottom: 1px solid #333;
    align-items: center;
  }
  .mine-icon {
    position: absolute;
    font-size: 20px;
    color: #00ffaa;
    pointer-events: none;
    user-select: none;
    animation: minePop 0.8s ease forwards;
    font-weight: bold;
  }
  @keyframes minePop {
    0% { opacity: 1; transform: translateY(0) scale(1); }
    100% { opacity: 0; transform: translateY(-40px) scale(1.4); }
  }
  .item-slot {
    background: rgba(255,255,255,0.1);
    border-radius: 5px;
    padding: 6px 8px;
    margin: 3px 4px;
    display: inline-flex;
    align-items: center;
    font-size: 12px;
    cursor: default;
    user-select:none;
  }
  .item-slot img {
    width: 20px;
    height: 20px;
    margin-right: 6px;
  }
  .craft-item {
    margin-bottom: 6px;
  }
  .craft-item span {
    margin-left: 4px;
    font-weight: bold;
  }
  .task-item {
    margin: 6px 0;
    padding: 6px;
    background: #222;
    border-radius: 5px;
  }
  .task-item.completed {
    background: #004400;
    color: #aaffaa;
    text-decoration: line-through;
  }
  .task-reward {
    color: #0f0;
    font-weight: bold;
  }
  input[type=number] {
    width: 50px;
    padding: 2px 4px;
    margin-left: 6px;
  }
  .sell-button {
    background: #ff5555;
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 11px;
    user-select:none;
  }
  .sell-button:disabled {
    background: gray;
    cursor: not-allowed;
  }
  /* Scrollbar */
  #screenContent::-webkit-scrollbar {
    width: 6px;
  }
  #screenContent::-webkit-scrollbar-track {
    background: #222;
  }
  #screenContent::-webkit-scrollbar-thumb {
    background: #00ffaa;
    border-radius: 3px;
  }
</style>
</head>
<body>
<div id="gameWrapper">
  <div id="topBar">
    <div><span class="icon">ğŸ’°</span> <span id="tlValue">0.00 TL</span></div>
    <div><span class="icon">â›</span> <span id="pickaxeType">TaÅŸ Kazma</span></div>
    <div><span class="icon">ğŸ”‹</span> <span id="energy">100</span></div>
    <div><span class="icon">â¤</span> <span id="durability">100</span></div>
    <div><span class="icon">ğŸ®</span> <span id="level">1</span></div>
  </div>
  <div id="expBarContainer"><div id="expBar"></div></div>
  <div id="taskBar">GÃ¶revler yÃ¼klendi...</div>
  <div id="screenContent" tabindex="0">Maden ekranÄ±nda kazmak iÃ§in herhangi bir yere tÄ±klayÄ±n...</div>
  <div id="bottomBar">
    <div class="bottomBtn" id="btnMine"><span>â›</span>Maden</div>
    <div class="bottomBtn" id="btnShop"><span>ğŸ¬</span>MaÄŸaza</div>
    <div class="bottomBtn" id="btnCraft"><span>ğŸ› </span>Craft</div>
    <div class="bottomBtn" id="btnInventory"><span>ğŸ’</span>Envanter</div>
    <div class="bottomBtn" id="btnTasks"><span>ğŸ¯</span>GÃ¶revler</div>
    <div class="bottomBtn" id="btnBank"><span>ğŸ¦</span>Banka</div>
  </div>
</div>

<!-- Ses -->
<audio id="mineSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_8a0bdfdbe7.mp3?filename=stone-pickaxe-104196.mp3" preload="auto"></audio>

<script>
(() => {
  // --- VERÄ° YAPILARI ---

  // TÃ¼m itemler (ikonlar fontawesome veya emojilerle temsil)
  const allItems = {
    "TaÅŸ": { value: 15, desc: "DeÄŸerli taÅŸ", icon: "ğŸª¨" },
    "Demir": { value: 40, desc: "Demir cevheri", icon: "â›“" },
    "AltÄ±n": { value: 80, desc: "DeÄŸerli altÄ±n", icon: "ğŸŸ¡" },
    "Elmas": { value: 120, desc: "Nadir elmas", icon: "ğŸ’" },
    "TaÅŸ Kazma": { value: 0, type: "tool", durability: 80, desc: "BaÅŸlangÄ±Ã§ taÅŸ kazmasÄ±", icon: "â›" },
    "Demir Kazma": { value: 5000, type: "tool", durability: 120, desc: "Daha gÃ¼Ã§lÃ¼ demir kazma", icon: "â›" },
    "AltÄ±n Kazma": { value: 15000, type: "tool", durability: 200, desc: "AltÄ±n kazma", icon: "â›" },
    "Elmas Kazma": { value: 50000, type: "tool", durability: 350, desc: "Elmas kazma", icon: "â›" },
    "Energy Drink": { value: 1000, type: "consumable", energy: 50, desc: "Enerji iÃ§eceÄŸi +50 enerji verir.", icon: "âš¡" }
  };

  // Kazma craft tarifleri
  const craftRecipes = {
    "TaÅŸ Kazma": { "TaÅŸ": 15 },
    "Demir Kazma": { "Demir": 25 },
    "AltÄ±n Kazma": { "AltÄ±n": 60 },
    "Elmas Kazma": { "Elmas": 100 }
  };

  // Oyun durumu
  let state = {
    coin: 0,
    energy: 100,
    durability: 100,
    level: 1,
    exp: 0,
    bag: [],
    equippedPickaxe: "TaÅŸ Kazma",
  };

  // GÃ¶revler: 5 normal + 1 gÃ¼nlÃ¼k
  let tasks = [
    { id: 1, text: "5 taÅŸ kaz", item: "TaÅŸ", count: 5, done: 0, coinReward: 25, expReward: 10, completed: false },
    { id: 2, text: "3 demir kaz", item: "Demir", count: 3, done: 0, coinReward: 40, expReward: 15, completed: false },
    { id: 3, text: "2 altÄ±n bul", item: "AltÄ±n", count: 2, done: 0, coinReward: 60, expReward: 20, completed: false },
    { id: 4, text: "1 elmas Ã§Ä±kar", item: "Elmas", count: 1, done: 0, coinReward: 100, expReward: 40, completed: false },
    { id: 5, text: "10 taÅŸ sat", item: "TaÅŸ", count: 10, done: 0, coinReward: 30, expReward: 15, completed: false },
  ];
  let dailyTask = { id: 6, text: "GÃ¼nlÃ¼k gÃ¶rev: 15 taÅŸ kaz!", item: "TaÅŸ", count: 15, done: 0, coinReward: 100, expReward: 60, completed: false };

  // --- KAYDET & YÃœKLE ---

  function saveGame() {
    const saveData = {
      state,
      tasks,
      dailyTask
    };
    localStorage.setItem("bbg-metin-rpg-save", JSON.stringify(saveData));
  }

  function loadGame() {
    const saveData = JSON.parse(localStorage.getItem("bbg-metin-rpg-save"));
    if (saveData) {
      state = saveData.state;
      tasks = saveData.tasks;
      dailyTask = saveData.dailyTask;
    }
  }

  // --- YARDIMCI FONKSÄ°YONLAR ---

  function updateUI() {
    document.getElementById("energy").textContent = state.energy;
    document.getElementById("durability").textContent = state.durability;
    document.getElementById("level").textContent = state.level;
    document.getElementById("pickaxeType").textContent = state.equippedPickaxe;
    document.getElementById("tlValue").textContent = (state.coin / 1000).toFixed(2) + " TL";

    // Exp bar width hesapla
    let neededExp = Math.floor(state.level * 120 * Math.pow(1.1, state.level-1));
    let expPercent = Math.min(100, (state.exp / neededExp) * 100);
    document.getElementById("expBar").style.width = expPercent + "%";

    updateTaskBar();
  }

  function showNotice(text) {
    const el = document.createElement("div");
    el.textContent = text;
    el.style.position = "fixed";
    el.style.top = "30%";
    el.style.left = "50%";
    el.style.transform = "translateX(-50%)";
    el.style.background = "#00ffaa";
    el.style.color = "#000";
    el.style.padding = "10px 20px";
    el.style.borderRadius = "8px";
    el.style.zIndex = 10000;
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 2000);
  }

  // Seviye atlama kontrolÃ¼
  function checkLevelUp() {
    let neededExp = Math.floor(state.level * 120 * Math.pow(1.1, state.level-1));
    while (state.exp >= neededExp) {
      state.exp -= neededExp;
      state.level++;
      state.energy = 100;
      state.durability = allItems[state.equippedPickaxe].durability || 100;
      showNotice(ğŸ‰ Seviye atladÄ±n! Yeni seviye: ${state.level});
      neededExp = Math.floor(state.level * 120 * Math.pow(1.1, state.level-1));
    }
  }

  // GÃ¶rev barÄ±nÄ± gÃ¼ncelle
  function updateTaskBar() {
    let incompleteTasks = tasks.filter(t => !t.completed);
    let currentTask = incompleteTasks.length > 0 ? incompleteTasks[0] : dailyTask.completed ? null : dailyTask;
    if (!currentTask) {
      document.getElementById("taskBar").textContent = "TÃ¼m gÃ¶revler tamamlandÄ±! Yeni gÃ¶revler yakÄ±nda.";
      return;
    }
    let progress = currentTask.done + "/" + currentTask.count;
    let rewardCoin = currentTask.coinReward;
    document.getElementById("taskBar").textContent = ğŸ¯ GÃ¶rev: ${currentTask.text} (${progress}) - Ã–dÃ¼l: ${rewardCoin} Coin;
  }

  // GÃ¶rev ilerlemesini kontrol et
  function updateTaskProgress(item) {
    // Normal gÃ¶revler
    for(let t of tasks){
      if(!t.completed && t.item === item){
        t.done++;
        if(t.done >= t.count){
          t.completed = true;
          state.coin += t.coinReward;
          state.exp += t.expReward;
          showNotice(âœ… GÃ¶rev tamamlandÄ±: ${t.text});
        }
      }
    }
    // GÃ¼nlÃ¼k gÃ¶rev
    if(!dailyTask.completed && dailyTask.item === item){
      dailyTask.done++;
      if(dailyTask.done >= dailyTask.count){
        dailyTask.completed = true;
        state.coin += dailyTask.coinReward;
        state.exp += dailyTask.expReward;
        showNotice(âœ… GÃ¼nlÃ¼k gÃ¶rev tamamlandÄ±: ${dailyTask.text});
      }
    }
  }

  // --- OYUN MEKANÄ°KLERÄ° ---

  // Rastgele integer
  function randomInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

  // Kazma iÅŸlemi (sadece Maden ekranÄ±nda geÃ§erli)
  let clickCount = 0;
  let rewardClickCount = randomInt(8,12);

  function mineClick(e){
    if(currentScreen !== "mine") return;

    if(state.energy <= 0) {
      showNotice("âš¡ Enerjin bitti! Bankadan enerji iÃ§eceÄŸi alabilirsin.");
      return;
    }
    if(state.durability <= 0) {
      showNotice("ğŸ›  Kazman kÄ±rÄ±ldÄ±! MaÄŸazadan yenisini al.");
      return;
    }

    // Coin kazanÄ±mÄ± (kazma tipi bazlÄ±)
    let baseCoinGain = 10 * state.level;
    // Kazma gÃ¼cÃ¼ artÄ±ÅŸÄ± (kazma seviyesine gÃ¶re)
    const pickaxePower = {
      "TaÅŸ Kazma": 1,
      "Demir Kazma": 1.6,
      "AltÄ±n Kazma": 2.8,
      "Elmas Kazma": 4.5
    };
    let coinGain = Math.floor(baseCoinGain * (pickaxePower[state.equippedPickaxe] || 1));
    state.coin += coinGain;

    // Item dÃ¼ÅŸme ÅŸansÄ±
    clickCount++;
    if(clickCount >= rewardClickCount) {
      clickCount = 0;
      rewardClickCount = randomInt(8,12);

      // Item dÃ¼ÅŸÃ¼r
      let itemPool = ["TaÅŸ","Demir","AltÄ±n","Elmas"];
      // Level arttÄ±kÃ§a nadir elmas dÃ¼ÅŸme ÅŸansÄ± biraz artsÄ±n:
      let chances = {
        "TaÅŸ": 0.45,
        "Demir": 0.30,
        "AltÄ±n": 0.18,
        "Elmas": 0.07 + 0.01*state.level
      };

      let rand = Math.random();
      let acc=0;
      let dropped=null;
      for(let it of itemPool){
        acc += chances[it];
        if(rand <= acc){
          dropped = it;
          break;
        }
      }
      if(dropped){
        addItem(dropped,1);
        updateTaskProgress(dropped);
        animateDrop(dropped);
        showNotice(+1 ${dropped} kazandÄ±n!);
      }
    }

    // Kazma dayanÄ±klÄ±lÄ±ÄŸÄ± ve enerji azalmasÄ± (level zorluk arttÄ±kÃ§a daha hÄ±zlÄ± azalabilir)
    let durabilityLoss = 1 + state.level*0.05;
    let energyLoss = 1 + state.level*0.03;
    state.durability = Math.max(0, state.durability - durabilityLoss);
    state.energy = Math.max(0, state.energy - energyLoss);

    // Exp kazanÄ±mÄ±
    let expGain = 5 + Math.floor(state.level/2);
    state.exp += expGain;
    checkLevelUp();
    updateUI();
    saveGame();

    // Kazma sesi Ã§al
    document.getElementById("mineSound").currentTime = 0;
    document.getElementById("mineSound").play();
  }

  // Animasyonlu item drop gÃ¶sterimi
  function animateDrop(itemName) {
    let icon = allItems[itemName].icon || "â“";
    let el = document.createElement("div");
    el.textContent = icon;
    el.classList.add("mine-icon");
    el.style.left = (window.innerWidth/2 + (Math.random()*100-50)) + "px";
    el.style.top = (window.innerHeight/2 + (Math.random()*40-20)) + "px";
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 800);
  }

  // Envantere item ekle
  function addItem(name, qty) {
    let slot = state.bag.find(i => i.name === name);
    if(slot) {
      slot.qty += qty;
    } else {
      state.bag.push({name, qty});
    }
  }

  // --- EKRANLAR ---

  let currentScreen = "mine";
  const screenContent = document.getElementById("screenContent");

  function showMineScreen() {
    currentScreen = "mine";
    screenContent.innerHTML = "Maden ekranÄ±nda kazmak iÃ§in herhangi bir yere tÄ±klayÄ±n.<br><br>" +
      "<b>Enerji ve Kazma DayanÄ±klÄ±lÄ±ÄŸÄ±nÄ± iyi takip et!</b>";
  }

  function showShopScreen() {
    currentScreen = "shop";
    let html = <h2>MaÄŸaza</h2><p>Kazma Ã§eÅŸitleri satÄ±n alÄ±nabilir.</p>;
    for(let key of Object.keys(craftRecipes)){
      let price = allItems[key].value;
      let isAffordable = state.coin >= price;
      html += `<div class="item-row">
        <div>${allItems[key].icon} ${key}</div>
        <div><b>${price} Coin</b></div>
        <div><button ${isAffordable ? "" : "disabled"} onclick="buyPickaxe('${key}')">SatÄ±n Al</button></div>
      </div>`;
    }
    screenContent.innerHTML = html;
  }

  function buyPickaxe(pickaxeName){
    let price = allItems[pickaxeName].value;
    if(state.coin >= price){
      state.coin -= price;
      // KazmayÄ± deÄŸiÅŸtir, dayanÄ±klÄ±lÄ±ÄŸÄ± tam dolu yap
      state.equippedPickaxe = pickaxeName;
      state.durability = allItems[pickaxeName].durability;
      showNotice(${pickaxeName} satÄ±n alÄ±ndÄ± ve kuÅŸandÄ±n!);
      saveGame();
      updateUI();
      showShopScreen();
    }
  }

  function showCraftScreen() {
    currentScreen = "craft";
    let html = <h2>Craft EkranÄ±</h2><p>Malzemelerin:</p><div>;
    for(let item in craftRecipes){
      html += `<div class="craft-item">${allItems[item].icon} <b>${item}</b> â€” Gereken: `;
      let needed = craftRecipes[item];
      let parts = [];
      for(let mat in needed){
        let owned = (state.bag.find(b => b.name === mat)?.qty) || 0;
        let enough = owned >= needed[mat];
        parts.push(<span style="color:${enough ? "#0f0" : "#f00"}">${mat} (${owned}/${needed[mat]})</span>);
      }
      html += parts.join(", ") + ` <button onclick="craftItem('${item}')" ${canCraft(item) ? "" : "disabled"}>Craft</button></div>`;
    }
    html += </div>;
    screenContent.innerHTML = html;
  }

  function canCraft(item){
    if(!craftRecipes[item]) return false;
    let needed = craftRecipes[item];
    for(let mat in needed){
      let owned = (state.bag.find(b => b.name === mat)?.qty) || 0;
      if(owned < needed[mat]) return false;
    }
    return true;
  }

  function craftItem(item) {
    if(!canCraft(item)) return;
    let needed = craftRecipes[item];
    for(let mat in needed){
      let slot = state.bag.find(b => b.name === mat);
      slot.qty -= needed[mat];
      if(slot.qty <= 0) {
        state.bag = state.bag.filter(b => b.qty > 0);
      }
    }
    addItem(item, 1);
    showNotice(${item} Ã¼retildi!);
    saveGame();
    updateUI();
    showCraftScreen();
  }

  function showInventoryScreen() {
    currentScreen = "inventory";
    if(state.bag.length === 0) {
      screenContent.innerHTML = "<p>Envanter boÅŸ.</p>";
      return;
    }
    let html = "<h2>Envanter</h2>";
    for(let slot of state.bag){
      html += `<div class="item-row">
        <div>${allItems[slot.name]?.icon || "â“"} ${slot.name}</div>
        <div>Adet: ${slot.qty}</div>
        <div><button class="sell-button" onclick="sellItem('${slot.name}', 1)">Sat</button></div>
      </div>`;
    }
    screenContent.innerHTML = html;
  }

  function sellItem(itemName, qty){
    let slot = state.bag.find(b => b.name === itemName);
    if(!slot || slot.qty < qty) return;
    let price = (allItems[itemName]?.value || 1) * qty;
    slot.qty -= qty;
    if(slot.qty <= 0) state.bag = state.bag.filter(b => b.qty > 0);
    state.coin += price;
    showNotice(${qty} ${itemName} satÄ±ldÄ±, +${price} Coin kazandÄ±n.);
    updateTaskProgress(itemName); // Satmak da gÃ¶rev olabilir
    saveGame();
    updateUI();
    showInventoryScreen();
  }

  function showTasksScreen() {
    currentScreen = "tasks";
    let html = "<h2>GÃ¶revler</h2>";
    for(let t of tasks){
      html += `<div class="task-item ${t.completed ? "completed" : ""}">
        <div>${t.text}</div>
        <div>Durum: ${t.done}/${t.count}</div>
        <div class="task-reward">Ã–dÃ¼l: ${t.coinReward} Coin, ${t.expReward} Exp</div>
      </div>`;
    }
    html += <h3>GÃ¼nlÃ¼k GÃ¶rev</h3>;
    html += `<div class="task-item ${dailyTask.completed ? "completed" : ""}">
      <div>${dailyTask.text}</div>
      <div>Durum: ${dailyTask.done}/${dailyTask.count}</div>
      <div class="task-reward">Ã–dÃ¼l: ${dailyTask.coinReward} Coin, ${dailyTask.expReward} Exp</div>
    </div>`;
    screenContent.innerHTML = html;
  }

  // Banka ekranÄ±: Para Ã§ek, yatÄ±r, enerji iÃ§eceÄŸi al
  function showBankScreen(){
    currentScreen = "bank";
    screenContent.innerHTML = `
      <h2>Banka</h2>
      <div><b>Coin:</b> ${state.coin} | <b>TL KarÅŸÄ±lÄ±ÄŸÄ±:</b> ${(state.coin/1000).toFixed(2)} TL</div>
      <br>
      <h3>Para Ã‡ekme</h3>
      <label>IBAN:</label><br>
      <input type="text" id="ibanInput" placeholder="TRxx xxxx xxxx xxxx xxxx xxxx xx" style="width: 100%;"><br>
      <label>IBAN Sahibi:</label><br>
      <input type="text" id="ibanOwnerInput" placeholder="Ad Soyad" style="width: 100%;"><br>
      <label>Tutar (Coin):</label><br>
      <input type="number" id="withdrawAmount" min="1" max="${state.coin}" value="1" style="width: 100%;"><br>
      <button onclick="withdrawCoin()">Para Ã‡ek</button>

      <br><br>
      <h3>Para YatÄ±rma</h3>
      <label>IBAN:</label><br>
      <input type="text" id="depositIban" value="TR90 0011 1000 0000 0118 8170 01" readonly style="width: 100%;"><br>
      <label>Ä°sim Soyisim:</label><br>
      <input type="text" id="depositName" value="Burak GÃ¼leÅŸci" readonly style="width: 100%;"><br>
      <label>YatÄ±rÄ±m TutarÄ± (TL):</label><br>
      <input type="number" id="depositAmount" min="1" value="100" style="width: 100%;"><br>
      <button onclick="depositCoin()">Onayla</button>

      <br><br>
      <h3>Enerji Ä°Ã§eceÄŸi</h3>
      <div>50 enerji verir, fiyat: 1000 Coin</div>
      <button onclick="buyEnergyDrink()">SatÄ±n Al</button>
    `;
  }

  // Para Ã§ekme iÅŸlemi
  window.withdrawCoin = function(){
    let iban = document.getElementById("ibanInput").value.trim();
    let owner = document.getElementById("ibanOwnerInput").value.trim();
    let amount = parseInt(document.getElementById("withdrawAmount").value);
    if(!iban || !owner){
      alert("LÃ¼tfen IBAN ve sahip bilgilerini girin!");
      return;
    }
    if(isNaN(amount) || amount < 1 || amount > state.coin){
      alert("GeÃ§ersiz tutar!");
      return;
    }
    state.coin -= amount;
    showNotice(${amount} Coin Ã§ekildi. Ä°ÅŸleminiz en kÄ±sa sÃ¼rede iÅŸlenecektir.);
    saveGame();
    updateUI();
    showBankScreen();
  }

  // Para yatÄ±rma iÅŸlemi
  window.depositCoin = function(){
    let amount = parseInt(document.getElementById("depositAmount").value);
    if(isNaN(amount) || amount < 1){
      alert("GeÃ§ersiz yatÄ±rÄ±m tutarÄ±!");
      return;
    }
    // Burada gerÃ§ek para yatÄ±rma iÅŸlemi yok, sadece bilgilendirme
    showNotice(Ã–demeniz alÄ±ndÄ±. En kÄ±sa sÃ¼rede hesabÄ±nÄ±za yansÄ±tÄ±lacaktÄ±r.);
  }

  // Enerji iÃ§eceÄŸi satÄ±n alma
window.buyEnergyDrink = function () {
  const price = allItems["Energy Drink"].value;
  if (state.coin < price) {
    alert("Yeterli Coin yok!");
    return;
  }
  state.coin -= price;

  // Enerji fulleniyor
  state.energy = 100;

  showNotice("Enerjin tamamen yenilendi!");
  saveGame();
  updateUI();
  showBankScreen();
};

  }

  // --- BUTON EVENTLERÄ° ---

  document.getElementById("btnMine").addEventListener("click", showMineScreen);
  document.getElementById("btnShop").addEventListener("click", showShopScreen);
  document.getElementById("btnCraft").addEventListener("click", showCraftScreen);
  document.getElementById("btnInventory").addEventListener("click", showInventoryScreen);
  document.getElementById("btnTasks").addEventListener("click", showTasksScreen);
  document.getElementById("btnBank").addEventListener("click", showBankScreen);

  // --- SAYFA KÄ°LÄ°DÄ° KAZMA Ä°ÅLEMÄ° ---

  screenContent.addEventListener("click", (e) => {
    if(currentScreen === "mine") {
      mineClick(e);
    }
  });

  // --- BAÅLANGIÃ‡ ---

  loadGame();
  updateUI();
  showMineScreen();

  // Global fonksiyonlar
  window.buyPickaxe = buyPickaxe;
  window.craftItem = craftItem;
  window.sellItem = sellItem;

})();
</script>
</body>
</html>
